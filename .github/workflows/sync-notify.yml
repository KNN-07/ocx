name: Sync Notify

on:
  workflow_dispatch:
  push:
    branches:
      - main
    paths:
      - 'workers/kdco-registry/files/plugin/notify.ts'
      - 'facades/opencode-notify/**'

jobs:
  sync:
    if: github.repository == 'kdcokenny/ocx'
    uses: ./.github/workflows/_sync-facade.yml
    with:
      source_plugin_path: workers/kdco-registry/files/plugin/notify.ts
      target_plugin_path: src/notify.ts
      source_readme_path: facades/opencode-notify/README.md
      target_repo: kdcokenny/opencode-notify
      checkout_path: notify
    secrets: inherit

name: PR Title

on:
  pull_request_target:
    types: [opened, edited, synchronize, reopened]

permissions:
  pull-requests: read
  statuses: write

jobs:
  validate:
    name: Validate PR Title
    runs-on: ubuntu-latest
    # Prevents workflow from running on forked repository copies
    # WARNING: Do not add checkout steps - pull_request_target has elevated permissions
    if: github.repository == 'kdcokenny/ocx'
    timeout-minutes: 2
    steps:
      # Pinned to SHA for security (pull_request_target runs with elevated permissions)
      - uses: amannn/action-semantic-pull-request@0723d8574fba920b731904c2100393fee6cb61a5  # v6.0.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          types: |
            feat
            fix
            docs
            style
            refactor
            perf
            test
            build
            ci
            chore
            revert
          scopes: |
            cli
            config
            profile
            registry
            commands
            schemas
            utils
            deps
            release
          requireScope: false
          ignoreLabels: |
            wip
            work in progress
          subjectPattern: ^[A-Z].+$
          subjectPatternError: |
            The subject "{subject}" doesn't match the required pattern.
            
            Please start with a capital letter (e.g., "feat: Add new feature")

{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://ocx.kdco.dev/schemas/profile.json",
	"title": "OCX Profile Configuration",
	"description": "Configuration schema for OCX profile files stored at ~/.config/opencode/profiles/<name>/ocx.jsonc",
	"type": "object",
	"additionalProperties": false,
	"properties": {
		"$schema": {
			"type": "string",
			"description": "Schema URL for IDE support"
		},
		"bin": {
			"type": "string",
			"description": "Path to OpenCode binary. Falls back to OPENCODE_BIN env var, then 'opencode'."
		},
		"registries": {
			"type": "object",
			"description": "Registry configurations keyed by name",
			"default": {},
			"additionalProperties": {
				"type": "object",
				"required": ["url"],
				"additionalProperties": false,
				"properties": {
					"url": {
						"type": "string",
						"format": "uri",
						"description": "Registry URL"
					},
					"version": {
						"type": "string",
						"description": "Registry version"
					},
					"headers": {
						"type": "object",
						"additionalProperties": { "type": "string" },
						"description": "Custom headers for registry requests"
					}
				}
			}
		},
		"componentPath": {
			"type": "string",
			"pattern": "^(?!/)(?![A-Za-z]:)(?!\\\\\\\\)(?!.*\\.\\.)[^\\0]+$",
			"description": "Relative path for component installation (no .. or absolute paths)"
		},
		"exclude": {
			"type": "array",
			"items": { "type": "string", "minLength": 1 },
			"default": [
				"**/AGENTS.md",
				"**/CLAUDE.md",
				"**/CONTEXT.md",
				"**/.opencode/**",
				"**/opencode.jsonc",
				"**/opencode.json"
			],
			"description": "Glob patterns for project files to exclude from OpenCode discovery"
		},
		"include": {
			"type": "array",
			"items": { "type": "string", "minLength": 1 },
			"default": [],
			"description": "Glob patterns for project files to include (overrides exclude)"
		},
		"renameWindow": {
			"type": "boolean",
			"default": true,
			"description": "Set terminal/tmux window name when launching OpenCode"
		}
	}
}
